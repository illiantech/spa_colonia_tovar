---
import { SiteModal } from "../components/SiteModal";
import Layout from "../layouts/Layout.astro";
import type { TourismSite } from "../utils/types";

// import { db, Sites } from "astro:db";
// const SITES = await db.select().from(Sites);

const SITES = (await fetch(`${Astro.url.origin}/api/sites`).then((res) =>
  res.json()
)) as TourismSite[];

console.log(SITES);

// export const prerender = true;
---

<Layout title="Welcome to Astro.">
  <section class="mt-[1500px] flex justify-center">
    <div
      class="flex max-w-6xl flex-wrap justify-evenly gap-x-1 gap-y-5 overflow-auto lg:gap-x-10 lg:gap-y-20"
    >
      {SITES.map((site) => <SiteModal client:visible {...site} />)}
    </div>
  </section>
</Layout>
